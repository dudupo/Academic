
\newcommand{\FF}{\mathbb{F}_{q}}
\newcommand{\VV}{\sum_{t}{V(x + w^{t}y)}}
We are going to introduce the polynomial code in an opposite order as in the usual literature. Instead of starting by presenting polynomials and the code itself we will begin by defining an abstract decoder, and define the code to be all the strings on which the decoder is apathetic. Consider the alphabet $\Sigma$, and let $D$ be a decoder such that on every $d+1$ coordinate $x_1,x_2, .. x_{d+1}$ and candidate for a code word $c$, read $c_1, c_2 .. c_{d}$ and returns a charter in $\Sigma$. We will think of $D$ as tester also. On given candidate $c \in \Sigma^{n}$, $D$ accept if for any $x_1,x_2.. x_{d+1}$ it holds that $C_{d+1} = D\left(c; x_1, x_2 .. x_{d+1} \right)$. We will associciate a single check with spesific $d+1$ coordinates.   

The setting avbove is kind general, and we will need to rquire form the code more to be a locally testable. Let us define the following property which could be thought as induction for cheks degenration:

\begin{definition}
  We will say that code $C$ has the \textit{degeneration} property if for any chack $h$ there is a set of checks $H\left( h \right)$ such that: 
  \begin{enumerate}
    \item if $H$ satisfied then also $h$ satisifed. 
    \item it easy to chack $H$.  
  \end{enumerate} 
\end{definition}

 

\begin{claim}The code defined by all the strings on which $D$ accept with probability $1$, when the randomness is over the sampled coordinates $x_{1}, x_{2} .. x_{d+1}$ is a locally testable code. In particular, if the $c$ is in the code, then a random check successes with probability $1$ and for every $c$ that is $\varepsilon$-far from the code the probability to, accept  is at most $ { d \choose 2 } |\Sigma| \varepsilon $.  
\end{claim}

\begin{proof}
  Notice that by definition if the tester accept with probability $1$ then $c \in C$. Suppose that $c$ pass the test with probability at least $1 - \varepsilon$. First, let us define the codeword $l$ such that $ l_{y} = Majoritiy_{x_1 .. x_{d}}D\left(c, x_{1}.. x_{d},y\right)$.

  \begin{claim} 
    The distance between $l$ and $c$ is at most $ 1- \left( 1 - \frac{1}{\Sigma} \right)^{-1}\varepsilon$.  
  \end{claim}
  \begin{proof} 
    Denote by $\alpha$ the probability that for given $y$, $D$ accept on more then $\frac{1}{|\Sigma|}$ fraction to choose $x_{1},x_{2}..x_{d}$. 
    Then we have that:  
    
    \begin{equation*}
      \begin{split}
        1 - \varepsilon  & \le \prbm{ D\left( x_1 .. x_{d+1} \right) }{x_1 .. x_{d+1}}  \\
        & = \prbcprb{  D\left( x_1 .. x_{d+1} \right)}{ x_1 .. x_{d+1}  }{ x_{d+1} \in A } + \\
        & \ \ \ \ \ \ \prbcprb{ D\left( x_1 .. x_{d+1} \right)}{ x_1 .. x_{d+1}   }{ x_{d+1} \notin A } \\
        & \le 1 \cdot \alpha +  \frac{1}{|\Sigma|}  \left( 1 - \alpha \right) = \left( 1 - \frac{1}{|\Sigma|} \right) \alpha  + \frac{1}{|\Sigma|} \\
       & \Rightarrow \alpha \ge  1- \left( 1 - \frac{1}{\Sigma} \right)^{-1}\varepsilon
      \end{split}
    \end{equation*}
  \end{proof} 

  So we showed that $l$ and $c$ are close. It's left to show that $l$ is a code word, namely that any check by $D$ pass. Fix a check, which equivalence as fix $d+1$ coordinates $x_{1} .. x_{d+1}$. Now notice that by the degenration property if there exists $y$ such that for every $i \in [d+1]$ $D\left(l; y_{1} .. y_{d}, x_{i} \right) = l_{x_{i}}$ than it follows that also $D\left(l; x_{1} .. x_{d+1} \right)$ pass.  
  \begin{equation*}
    \begin{split}
      \left\{ D(G(c) ; x ) \right\} \subset \bigcap_{ x_{i} } \left\{ D\left( x_{i} ; y_{1} .. y_{d} \right)  \right\} 
    \end{split}
  \end{equation*}
\end{proof}

Denote by $V(x)$ the vandermonde matrix defined by $x$ namely $V(x)_{ij} = x_{i}^{j}$. and by $w$ the $d$ root of $1$. 


\begin{claim} 
  \label{claim:van }
Now $\sum_{t}{ V\left( x +  w^{t}y \right)  } = t \cdot \left(V(x) + V(y) \right)$.   
\end{claim}

\begin{equation*}
  \begin{split}
  \left(\sum_{t}V(x + w^{t}y)\right)_{j} = \sum{ \sum w^{l\cdot t} { j \choose l }x_{i}^{l}y_{i}^{j - l}   } = t \left( \cdot x^{j} + y^{j}\right) + \sum_{l\neq 0,j}{\frac{w^{l\cdot d} - 1 }{w^{l}-1}\cdot {j \choose l}x_{i}^{l}y_{i}^{j-l}}
  \end{split}
\end{equation*}

\begin{claim}
  Consider the finte field $\FF$ for prime $q$, denote by $w$ the $d$ root of $1$, namely $w^{d}  = 1$ then for any polynomial $f$ with degree at most $d$ it holds:   
  \begin{equation}
    \label{eq:poly}
    f(x) = \frac{1}{d} \sum_{t}^{d}{f( x + w^{t}y)}  \ \ \ \forall x,y \in \FF
  \end{equation} 
\end{claim}
\begin{proof}
  Denote by $a_{j}$ the $j$th coffecicient of $f$. And recall that for any fiexd $l \in \FF$ the summtiom $ \sum_{t}^{d}w^{t\cdot l}$ equals: 

  \begin{equation*}
    \sum_{t}^{d}w^{t\cdot l} = \begin{cases}
      \frac{w^{l \cdot d} - 1}{ w^{l} - 1 } = 0  & l \neq 0 \\
      d   & l = 0
    \end{cases}
  \end{equation*}
Thus:  
  \begin{equation*}
    \begin{split}
  &  \sum_{t}{ f\left( x + w^{t}y \right)  } = \sum_{t,j}{a_{j}\left( x + w^{t}y \right)^{j}}  =  \sum_{t,j}{ a_{j} \left( \sum_{l} x^{j-l} w^{t\cdot l}y^{l} { j \choose l} \right)} \\
  & =  \sum_{j}{ a_{j} \sum_{l} x^{j-l} y^{l} { j \choose l} \sum_{t} w^{t\cdot l} } \\
  & = \sum_{j}{ a_{j}  x^{j} \cdot d } = f(x) \cdot d  
    \end{split}
  \end{equation*}
\end{proof}
For example consider a linear function over $\FF$, then it $w^2 = 1 \Rightarrow w = -1 $ and it clears that $f(x) = \frac{1}{2} \left( f(x - y) + f(x + y) \right)$.

\begin{claim}
  Suppose that $f : \FF \rightarrow \FF$ satisfies \cref{eq:poly} than, ethier $f$ is polyonomial at degree at most $d$ or that $f$ is the zero function.  
\end{claim}
\begin{proof}
  Assume by contradiction that $f$ has more then $d+1$ zeros (w.l.g). Denote them  by $x_{1},x_{2}.. x_{d+1}$. We will show that for any $x \in \FF $ one can find $y \in \FF$ such that $x + w^{t}y =x_{t}$. Those equations compose a linear diophantine system which can reduced for the following system: 
  \begin{equation*}  
\begin{bmatrix}
                              w                     & 1 &  \dots                   &       0                 \\
                               w^{2}                & 0     &  \dots                   &       0                    \\
                              \vdots                    &  \ddots               &  \vdots                    \\
                               w^{d-2}              & 0    &  \dots                   &       1                    \\
                               w^{d-1}              & 0 & \dots       &  0     &       0
\end{bmatrix} 
\begin{bmatrix}
  y \\ 
  k_{1} \\
  k_{2} \\
  \vdots  \\
  k_{d} \\  
\end{bmatrix}
= \begin{bmatrix}
  x_{1} - x \\
  x_{2} -x \\
  \vdots \\
  x_{d} - x \\
  x_{d+1} - x
\end{bmatrix}
  \end{equation*}
\end{proof}


\begin{claim}
For any $i\neq j,x \neq 0 $ the pair $x + yw^{i}$, $x+ yw^{j}$ distrubuted indepandeantly.
\end{claim}

\begin{claim}
  If the test reject $c$ with probability at most $\varepsilon$ then $c$ is a $d$-degree polynomial.
\end{claim}

\begin{proof}
  Let $A$ coeffcints vector such that the probability that indeapandet $x,y \in \mathbb{F}_{q}^{d+1}$ agree on with probability $\ge \varepsilon$. We will show that for any $x \in \FF^{d+1}$ it has to hold that $\left(V(y) + V(x)\right)A = c^{(x)} + c^{(y)}$. Using \cref{claim:van} it follows that $\left( V(x) + V(y) \right) A = \left(-\VV A \right) $. With probabiliy at least $ 1 - \varepsilon \cdot \left( d+1 \right) $ all the pairs $ x+ w^{t},x + w^{t+1}y$ agree with each other on $A$. So the $AV(x+w^{t}$ is    
\end{proof}





